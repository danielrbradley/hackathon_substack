name: aws-reference-architecture
description: Real-world application architecture
runtime: yaml
resources:
  networking:
    type: pulumi:pulumi:Program
    properties:
      source: ./networking
      inputs:
        azCount: 3

  database:
    type: pulumi:pulumi:Program
    properties:
      source: ./database
      inputs:
        dbUsername: ${dbUsername}
        dbName: ${dbName}
        dataVpcPrivateSubnetIds: ${networking.outputs["dataVpcPrivateSubnetIds"]}
        peeredSecurityGroupId: ${networking.outputs["peeredSecurityGroupId"]}

outputs:
  networking: ${networking.outputs}
  database: ${database.outputs}
